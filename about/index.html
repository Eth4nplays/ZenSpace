<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ZenSpace</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../favicon.png">

  <!-- Poppins Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Markdown Parser -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <style>
    body {
      background-color: #ffe6da;
      color: #cb6100;
      font-family: 'Poppins', sans-serif;
      max-width: 900px;
      margin: 60px auto;
      text-align: center;
      line-height: 1.8;
      padding: 0 20px;
    }

    h1, h2, h3 {
      font-weight: 700;
      margin-top: 40px;
    }

    p {
      font-weight: 400;
    }

    a {
      color: #9b3e00;
      font-weight: 600;
      text-decoration: underline;
    }

    a:hover {
      color: #7a2b00;
      text-decoration: underline;
    }

    img {
      margin: 20px auto;
      border-radius: 12px;
      max-height: 200px;
      object-fit: contain;
    }

    pre {
      background: rgba(203, 97, 0, 0.1);
      padding: 15px;
      border-radius: 10px;
      text-align: left;
      overflow-x: auto;
    }

    code {
      background: rgba(203, 97, 0, 0.1);
      padding: 3px 6px;
      border-radius: 6px;
    }

    .warning-box {
      background: #cb6100;
      color: #ffe6da;
      padding: 20px;
      border-radius: 14px;
      margin: 40px auto;
      font-weight: 600;
      max-width: 600px;
      text-align: left;
    }

    .carousel-container {
      position: relative;
      margin: 30px 0;
      overflow: hidden;
      max-width: 100%;
    }

    .carousel-track {
      display: flex;
      transition: transform 0.3s ease-in-out;
      gap: 10px;
    }

    .carousel-track img {
      flex: 0 0 auto;
      max-width: 200px;
      height: auto;
      border-radius: 12px;
    }

    .carousel-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #cb6100;
      color: #ffe6da;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      font-weight: 700;
      border-radius: 8px;
      opacity: 0.8;
      z-index: 1;
    }

    .carousel-button:hover {
      opacity: 1;
    }

    .carousel-button.prev {
      left: 0;
    }

    .carousel-button.next {
      right: 0;
    }

    footer {
      margin-top: 60px;
      padding: 20px 0;
      border-top: 1px solid #cb6100;
      color: #9b3e00;
      font-weight: 600;
      text-align: center;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

<div id="content">Loading...</div>

<footer id="page-footer">
  Â© TaskMaster 
  <a href="https://eth4nplays.wixstudio.com/taskmaster/zenspace-privacy" target="_blank">Privacy Policy</a> 
   
  <a href="https://eth4nplays.wixstudio.com/taskmaster/zenspace-terms" target="_blank">Terms of Service</a>.
</footer>

<script>
fetch("https://raw.githubusercontent.com/Eth4nplays/ZenSpace/main/README.md")
  .then(response => response.text())
  .then(markdown => {
    // Remove top-level # header
    const lines = markdown.split("\n");
    if (lines[0].startsWith("# ")) lines.shift();
    markdown = lines.join("\n");

    // Warning box
    markdown = markdown.replace(
      /> \[!WARNING\]\n([\s\S]*?)(?=\n\n|$)/g,
      (match, content) => `<div class="warning-box">${marked.parse(content)}</div>`
    );

    // Parse Markdown
    const contentDiv = document.getElementById("content");
    contentDiv.innerHTML = marked.parse(markdown);

    // Find "App Screenshots" section
    const screenshotsHeader = [...contentDiv.querySelectorAll('h2')]
      .find(h => h.textContent.trim() === 'App Screenshots');

    if (screenshotsHeader) {
      // Collect images until next h2
      const imgs = [];
      let sibling = screenshotsHeader.nextElementSibling;
      while(sibling && sibling.tagName !== 'H2'){
        if(sibling.tagName === 'IMG'){
          imgs.push(sibling);
        }
        sibling = sibling.nextElementSibling;
      }

      if(imgs.length > 0){
        const carouselContainer = document.createElement('div');
        carouselContainer.classList.add('carousel-container');

        const track = document.createElement('div');
        track.classList.add('carousel-track');

        imgs.forEach(img => {
          track.appendChild(img.cloneNode(true));
          img.remove();
        });

        carouselContainer.appendChild(track);

        const prevBtn = document.createElement('button');
        prevBtn.classList.add('carousel-button','prev');
        prevBtn.innerHTML = '&#10094;';
        carouselContainer.appendChild(prevBtn);

        const nextBtn = document.createElement('button');
        nextBtn.classList.add('carousel-button','next');
        nextBtn.innerHTML = '&#10095;';
        carouselContainer.appendChild(nextBtn);

        screenshotsHeader.insertAdjacentElement('afterend', carouselContainer);

        // Carousel functionality
        let index = 0;
        const imgWidth = track.querySelector('img')?.clientWidth || 200;

        prevBtn.addEventListener('click', () => {
          index = Math.max(index - 1, 0);
          track.style.transform = `translateX(${-index * (imgWidth + 10)}px)`;
        });

        nextBtn.addEventListener('click', () => {
          index = Math.min(index + 1, track.children.length - 1);
          track.style.transform = `translateX(${-index * (imgWidth + 10)}px)`;
        });
      }
    }
  });
</script>

</body>
</html>
